const mobileMenu=()=>{let e=document.querySelector(".main-nav"),a=document.querySelector(".main-nav__toggle");e.classList.remove("main-nav--nojs"),a.addEventListener("click",(function(){e.classList.contains("main-nav--closed")?(e.classList.remove("main-nav--closed"),e.classList.add("main-nav--opened")):(e.classList.add("main-nav--closed"),e.classList.remove("main-nav--opened"))}))};mobileMenu();const swiper=new Swiper(".swiper",{loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),position=[59.968266,30.3174089],map=L.map("map").setView(position,17);L.tileLayer("https://api.maptiler.com/maps/streets-v2/{z}/{x}/{y}.png?key=HMfyPUotkQhoWYIXN1mz",{crossOrigin:!0}).addTo(map);const mainPinIcon=L.icon({iconUrl:"../img/svg/map-pin.svg",iconSize:[39,50],iconAnchor:[18,50]}),mainPin=L.marker({lat:position[0],lng:position[1]},{draggable:!0,icon:mainPinIcon});mainPin.addTo(map);const minInput=document.querySelector(".filter__price-controls-input--min"),maxInput=document.querySelector(".filter__price-controls-input--max"),minToggle=document.querySelector(".filter__range-toggle-min"),maxToggle=document.querySelector(".filter__range-toggle-max"),rangeBar=document.querySelector(".filter__range-bar"),resetBtn=document.querySelector(".filter__btn--reset"),checkboxes=document.querySelectorAll('input[type="checkbox"]'),radioBtns=document.querySelectorAll('input[type="radio"]'),rangeToggle=document.querySelectorAll(".filter__range-toggles input"),priceInput=document.querySelectorAll(".filter__price-controls input");let priceGap=50;const resetFilters=()=>{resetBtn.addEventListener("click",(()=>{checkboxes.forEach((e=>{e.checked&&(e.checked=!1)})),radioBtns.forEach((e=>{e.checked&&(e.checked=!1)})),minInput.value="0",maxInput.value="900",minToggle.value="0",maxToggle.value="900",rangeBar.style.left="0",rangeBar.style.right="0"}))};rangeToggle.forEach((e=>{e.addEventListener("input",(e=>{let a=parseInt(rangeToggle[0].value),n=parseInt(rangeToggle[1].value);n-a<priceGap?"filter__range-toggle-min"===e.target.className?rangeToggle[0].value=n-priceGap:rangeToggle[1].value=a+priceGap:(priceInput[0].value=a,priceInput[1].value=n,rangeBar.style.left=a/rangeToggle[0].max*100+"%",rangeBar.style.right=100-n/rangeToggle[1].max*100+"%")}))}));const changePriceInput=()=>{maxToggle.value-minToggle.value<priceGap?"filter__range-toggle-min"===e.target.className?minToggle.value=maxToggle.value-priceGap:maxToggle.value=minToggle.value+priceGap:(minInput.value=minToggle.value,maxInput.value=maxToggle.value,rangeBar.style.left=minToggle.value/minToggle.max*100+"%",rangeBar.style.right=100-maxToggle/maxToggle.max*100+"%")},onInputValueChange=()=>{function e(){minInput.value<maxInput.value&&(minToggle.value=minInput.value,maxToggle.value=maxInput.value,rangeBar.style.left=minToggle.value/minToggle.max*100+"%",rangeBar.style.right=100-maxToggle.value/maxToggle.max*100+"%")}function a(){0===minInput.value.length&&(minToggle.value=0,rangeBar.style.left=0),(0===maxInput.value.length||maxInput.value.length<3)&&(maxToggle.value=900,rangeBar.style.right=0)}minInput.addEventListener("input",e),maxInput.addEventListener("input",e),minInput.addEventListener("input",a),maxInput.addEventListener("input",a)};maxToggle.value-minToggle.value<priceGap?"filter__range-toggle-min"===e.target.className?minToggle.value=maxToggle.value-priceGap:maxToggle.value=minToggle.value+priceGap:(minInput.value=minToggle.value,maxInput.value=maxToggle.value,rangeBar.style.left=minToggle.value/minToggle.max*100+"%",rangeBar.style.right=100-maxToggle/maxToggle.max*100+"%"),resetBtn.addEventListener("click",(()=>{checkboxes.forEach((e=>{e.checked&&(e.checked=!1)})),radioBtns.forEach((e=>{e.checked&&(e.checked=!1)})),minInput.value="0",maxInput.value="900",minToggle.value="0",maxToggle.value="900",rangeBar.style.left="0",rangeBar.style.right="0"})),onInputValueChange();const form=document.querySelector("form"),checkboxArrow=form.querySelectorAll('input[type="checkbox"]'),radioArrow=form.querySelectorAll('input[type="radio"]'),createArrowFromNodeList=e=>{const a=[];return e.forEach((e=>{a.push(e)})),a},checkedItems=e=>{let a=[];return e.forEach((e=>{e.checked&&a.push(e.value)})),console.log(a),a};form.addEventListener("submit",(()=>{localStorage.setItem("Минимальная цена",minInput.value),localStorage.setItem("Максимальная цена",maxInput.value),localStorage.setItem("Наличие молока",checkedItems(createArrowFromNodeList(radioArrow))),localStorage.setItem("Страна произростания",checkedItems(createArrowFromNodeList(checkboxArrow)))}));